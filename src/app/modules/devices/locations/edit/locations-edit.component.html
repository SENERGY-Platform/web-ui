<!--
  ~ Copyright 2020 InfAI (CC SES)
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->
<div class="location-edit-container" fxLayout="column">
    <h2>Location</h2>

    <div *ngIf="locationForm" [formGroup]="locationForm">
        <mat-form-field class="full-width" color="accent">
            <input matInput placeholder="Name" formControlName="name" required>
        </mat-form-field>
        <mat-form-field class="full-width" color="accent">
            <textarea matInput placeholder="Description" formControlName="name" required></textarea>
        </mat-form-field>
        <mat-form-field class="full-width" color="accent">
            <input matInput placeholder="Image" formControlName="image">
        </mat-form-field>
    </div>

    <div class="devices-container">
        <h2>Device-Groups</h2>
        <div *ngIf="deviceGroupsForm.value.length > 0">
            <mat-card  *ngFor="let item of deviceGroupsForm.value" fxLayout="row" fxLayoutAlign="space-between center" class="device-card">
                <div class="device-info">
                    <div matTooltip="{{item.name}}" class="device-name">
                        {{item.name}}
                    </div>
                </div>
                <div class="device-ctrl">
                    <button mat-icon-button color="accent" (click)="removeDeviceGroup(item.id)" matTooltip="Remove">
                        <mat-icon>delete</mat-icon>
                    </button>
                </div>
            </mat-card>
        </div>
        <button mat-raised-button color="accent" (click)="selectAndAddGroups()">Add Groups</button>
    </div>
    <mat-divider></mat-divider>
    <div class="devices-container">
        <h2>Devices</h2>
        <div *ngIf="devicesForm.value.length > 0">
            <mat-card  *ngFor="let item of devicesForm.value" fxLayout="row" fxLayoutAlign="space-between center" class="device-card">
                <div class="device-info">
                    <div matTooltip="{{item.name}}" class="device-name">
                        {{item.name}}
                    </div>
                </div>
                <div class="device-ctrl">
                    <button mat-icon-button color="accent" (click)="removeDevice(item.id)" matTooltip="Remove">
                        <mat-icon>delete</mat-icon>
                    </button>
                </div>
            </mat-card>
        </div>
        <button mat-raised-button color="accent" (click)="selectAndAddDevices()">Add Devices</button>
    </div>

    <div class="controls" fxLayoutAlign="end center">
        <button mat-raised-button color="accent"
                [class.spinner]="isSaving"
                [disabled]="isSaving"
                (click)="save()">Save
        </button>
    </div>
</div>






