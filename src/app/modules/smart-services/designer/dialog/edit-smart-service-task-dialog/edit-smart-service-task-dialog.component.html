<!--
  ~ Copyright 2020 InfAI (CC SES)
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->


<mat-dialog-content>
  <mat-tab-group  dynamicHeight="true" [(selectedIndex)]="activeIndex">
    <mat-tab label="Process">
      <div>
        <mat-form-field appearance="fill">
          <mat-label>Process-Model</mat-label>
          <mat-select [(ngModel)]="processProcessModelId">
            <mat-option *ngFor="let model of processModels" [value]="model.id">
              {{model.name}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div>
        <mat-form-field class="full-width" color="accent">
          <input matInput placeholder="Deployment-Name" [(ngModel)]="processProcessName" required>
        </mat-form-field>
      </div>

      <div>
        <mat-accordion>
          <mat-expansion-panel *ngFor="let taskId of processTaskIds">
            <mat-expansion-panel-header>
              <mat-panel-title>
                {{taskId}}
              </mat-panel-title>
            </mat-expansion-panel-header>
            <div>
              <ng-container *ngFor="let input of result.inputs">
                <div *ngIf="processTaskMatches(input, taskId, 'selection')">
                  <mat-form-field class="full-width" color="accent">
                    <input matInput placeholder="IoT-Selection" [(ngModel)]="input.value" required>
                  </mat-form-field>
                </div>
                <div *ngIf="processTaskMatches(input, taskId, 'time')">
                  <mat-form-field class="full-width" color="accent">
                    <input matInput placeholder="Time-Event" [(ngModel)]="input.value" required>
                  </mat-form-field>
                </div>
                <div *ngIf="processTaskMatches(input, taskId, 'event.flow_id')">
                  <mat-form-field class="full-width" color="accent">
                    <input matInput placeholder="Event-Flow-Id" [(ngModel)]="input.value" required>
                  </mat-form-field>
                </div>
                <div *ngIf="processTaskMatches(input, taskId, 'event.value')">
                  <mat-form-field class="full-width" color="accent">
                    <input matInput placeholder="Event-Value" [(ngModel)]="input.value" required>
                  </mat-form-field>
                </div>
                <ng-container *ngFor="let parameter of getProcessTaskParameter(taskId)">
                  <div *ngIf="processTaskMatches(input, taskId, 'parameter.'+parameter)">
                    <mat-form-field class="full-width" color="accent">
                      <input matInput placeholder="{{parameter}}" [(ngModel)]="input.value" required>
                    </mat-form-field>
                  </div>
                </ng-container>
              </ng-container>
            </div>
          </mat-expansion-panel>
        </mat-accordion>
      </div>

    </mat-tab>
    <mat-tab label="Analytics">

    </mat-tab>
    <mat-tab label="Export">

    </mat-tab>
    <mat-tab label="Import">

    </mat-tab>
  </mat-tab-group>
</mat-dialog-content>

<mat-dialog-actions fxLayoutAlign="end center">
  <button mat-raised-button color="primary" (click)="close()">Cancel</button>
  <button mat-raised-button color="accent" (click)="ok()">Ok</button>
</mat-dialog-actions>

